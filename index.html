<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MUHAMMED ALƒ∞ AKKAYA - Akƒ±cƒ± Oyunlar</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    
    <style>
        body {
            background: #1a1a1a;
            background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url("unnamed.jpg");
            background-size: cover; background-position: center; background-repeat: no-repeat;
            background-attachment: fixed; margin: 0; font-family: 'Segoe UI', sans-serif;
            display: flex; align-items: center; justify-content: center;
            height: 100vh; overflow: hidden; touch-action: none;
        }

        /* Men√º */
        .menu-container {
            display: flex; flex-direction: column; gap: 20px; z-index: 9000; text-align: center;
        }
        .main-btn {
            padding: 20px 40px; color: white; border: none; border-radius: 50px;
            cursor: pointer; font-size: 22px; font-weight: bold; width: 280px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); transition: 0.3s;
        }
        #fruitMenuBtn { background: #e74c3c; }
        #snakeMenuBtn { background: #2ecc71; }

        /* Oyun Alanlarƒ± */
        .game-wrapper {
            display: none; position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%); z-index: 9500;
        }
        .game-header {
            display: flex; justify-content: space-between; align-items: center;
            background: #2c3e50; padding: 10px; border-radius: 10px 10px 0 0;
            border: 2px solid #2ecc71; color: white; font-family: monospace;
        }
        .game-container {
            width: 90vw; max-width: 360px; height: 80vh; max-height: 650px;
            background: rgba(255, 255, 255, 0.95); border: 4px solid #2ecc71; position: relative;
            overflow: hidden; border-radius: 0 0 10px 10px; display: flex; flex-direction: column;
        }

        #gameCanvas, #snakeCanvas { width: 100%; height: 100%; display: block; }

        /* Konsol Kontrolleri */
        .console-controls {
            background: #2c3e50; padding: 15px 0; display: grid;
            grid-template-columns: repeat(3, 1fr); gap: 10px; justify-items: center;
        }
        .ctrl-btn {
            width: 55px; height: 55px; background: #34495e; color: white;
            border: 2px solid #2ecc71; border-radius: 50%; font-size: 20px;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        .overlay {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); flex-direction: column; align-items: center;
            justify-content: center; z-index: 11000; text-align: center;
        }
        .close-game { background: #c0392b; color: white; padding: 5px 12px; cursor: pointer; border-radius: 5px; border: none; }
    </style>
</head>
<body>

    <div id="mainMenu" class="menu-container">
        <h1 style="color: white; margin-bottom: 30px; text-shadow: 2px 2px 5px black;">OYUN SE√áƒ∞N</h1>
        <button id="fruitMenuBtn" class="main-btn" onclick="openFruitGame()">MEYVE OYUNU</button>
        <button id="snakeMenuBtn" class="main-btn" onclick="openSnakeGame()">YILAN OYUNU</button>
    </div>

    <div id="fruitWrapper" class="game-wrapper">
        <div class="game-header">
            <div>SKOR: <span id="scoreVal">0</span></div>
            <div id="nextEmoji" style="font-size: 24px;">üçì</div>
            <button class="close-game" onclick="location.reload()">MEN√ú X</button>
        </div>
        <div class="game-container">
            <div id="gameCanvas"></div>
            <div id="fruitGameOver" class="overlay">
                <h2 style="color: #e74c3c;">OYUN Bƒ∞TTƒ∞</h2>
                <button class="main-btn" style="background:#2ecc71" onclick="openFruitGame()">TEKRAR</button>
            </div>
        </div>
    </div>

    <div id="snakeWrapper" class="game-wrapper">
        <div class="game-header">
            <div>YILAN SKOR: <span id="snakeScore">0</span></div>
            <button class="close-game" onclick="location.reload()">MEN√ú X</button>
        </div>
        <div class="game-container" style="background: #111;">
            <canvas id="snakeCanvas"></canvas>
            <div id="snakeGameOver" class="overlay">
                <h2 style="color: #e74c3c;">EYVAH! √áARPTIN</h2>
                <button class="main-btn" style="background:#2ecc71" onclick="openSnakeGame()">TEKRAR</button>
            </div>
            <div class="console-controls">
                <div></div><div class="ctrl-btn" onclick="changeSnakeDir('UP')">‚ñ≤</div><div></div>
                <div class="ctrl-btn" onclick="changeSnakeDir('LEFT')">‚óÄ</div><div class="ctrl-btn" onclick="changeSnakeDir('DOWN')">‚ñº</div><div class="ctrl-btn" onclick="changeSnakeDir('RIGHT')">‚ñ∂</div>
            </div>
        </div>
    </div>

    <script>
        let audioCtx;
        function playPop() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            try {
                const osc = audioCtx.createOscillator(); const g = audioCtx.createGain();
                osc.type = 'sine'; osc.frequency.setValueAtTime(400, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                g.gain.setValueAtTime(0.1, audioCtx.currentTime);
                g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                osc.connect(g); g.connect(audioCtx.destination); osc.start(); osc.stop(audioCtx.currentTime + 0.1);
            } catch(e) {}
        }

        // Klavye Desteƒüi
        window.addEventListener('keydown', (e) => {
            if (e.key === "ArrowUp" || e.key === "w") changeSnakeDir('UP');
            if (e.key === "ArrowDown" || e.key === "s") changeSnakeDir('DOWN');
            if (e.key === "ArrowLeft" || e.key === "a") changeSnakeDir('LEFT');
            if (e.key === "ArrowRight" || e.key === "d") changeSnakeDir('RIGHT');
            if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight", " "].includes(e.key)) e.preventDefault();
        });

        // --- AKICI YILAN OYUNU Sƒ∞STEMƒ∞ ---
        let sCanvas = document.getElementById("snakeCanvas"), sCtx = sCanvas.getContext("2d");
        let snakeHead, snakeTrail, trailLength, snakeDir, nextSnakeDir, snakeActive, snakeScore, food;
        const moveSpeed = 1.5; // Piksel bazlƒ± hƒ±z (Akƒ±cƒ±lƒ±ƒüƒ± saƒülar)
        const segmentDist = 18; // G√∂vde par√ßalarƒ± arasƒ±ndaki mesafe

        function openSnakeGame() {
            document.getElementById("mainMenu").style.display = "none";
            document.getElementById("snakeWrapper").style.display = "block";
            document.getElementById("snakeGameOver").style.display = "none";
            sCanvas.width = 360; sCanvas.height = 360;
            
            snakeHead = { x: 180, y: 180 };
            snakeTrail = []; // Yƒ±lanƒ±n ge√ßtiƒüi t√ºm noktalar
            trailLength = 4; // Ba≈ülangƒ±√ß g√∂vde sayƒ±sƒ±
            snakeDir = 'RIGHT'; nextSnakeDir = 'RIGHT';
            snakeScore = 0; snakeActive = true;
            document.getElementById("snakeScore").innerText = "0";
            
            spawnSnakeFood();
            requestAnimationFrame(snakeUpdate);
        }

        function spawnSnakeFood() {
            food = { x: 40 + Math.random() * 280, y: 40 + Math.random() * 280 };
        }

        function changeSnakeDir(d) {
            if(d=='UP' && snakeDir!='DOWN') nextSnakeDir='UP';
            if(d=='DOWN' && snakeDir!='UP') nextSnakeDir='DOWN';
            if(d=='LEFT' && snakeDir!='RIGHT') nextSnakeDir='LEFT';
            if(d=='RIGHT' && snakeDir!='LEFT') nextSnakeDir='RIGHT';
        }

        function snakeUpdate() {
            if(!snakeActive) return;

            snakeDir = nextSnakeDir;
            // Kafayƒ± hareket ettir
            if(snakeDir == 'UP') snakeHead.y -= moveSpeed;
            if(snakeDir == 'DOWN') snakeHead.y += moveSpeed;
            if(snakeDir == 'LEFT') snakeHead.x -= moveSpeed;
            if(snakeDir == 'RIGHT') snakeHead.x += moveSpeed;

            // Duvar √áarpƒ±≈ümasƒ±
            if(snakeHead.x < 0 || snakeHead.x > 360 || snakeHead.y < 0 || snakeHead.y > 360) {
                gameOverSnake(); return;
            }

            // Pozisyonu kaydet
            snakeTrail.unshift({ x: snakeHead.x, y: snakeHead.y });

            // Kuyruk √áarpƒ±≈ümasƒ± (Biraz mesafe bƒ±raktƒ±ktan sonra kontrol et)
            if(snakeTrail.length > 30) {
                for(let i = 25; i < snakeTrail.length; i += 5) {
                    let d = Math.hypot(snakeHead.x - snakeTrail[i].x, snakeHead.y - snakeTrail[i].y);
                    if(d < 10) { gameOverSnake(); return; }
                }
            }

            // Yemek Yeme
            let distToFood = Math.hypot(snakeHead.x - food.x, snakeHead.y - food.y);
            if(distToFood < 15) {
                snakeScore += 10;
                trailLength++;
                document.getElementById("snakeScore").innerText = snakeScore;
                playPop();
                spawnSnakeFood();
            }

            // Fazla trail noktalarƒ±nƒ± sil
            const maxPoints = trailLength * (segmentDist / moveSpeed);
            if(snakeTrail.length > maxPoints) snakeTrail.pop();

            drawSnake();
            requestAnimationFrame(snakeUpdate);
        }

        function drawSnake() {
            sCtx.clearRect(0, 0, 360, 360);

            // Yemek
            sCtx.fillStyle = "#ff4d4d";
            sCtx.beginPath();
            sCtx.arc(food.x, food.y, 8, 0, Math.PI*2);
            sCtx.fill();

            // Yƒ±lan G√∂vdesi (Trail √ºzerinden par√ßalarƒ± se√ßerek √ßiz)
            for (let i = 0; i < trailLength; i++) {
                let index = Math.min(Math.floor(i * (segmentDist / moveSpeed)), snakeTrail.length - 1);
                let pos = snakeTrail[index];
                
                sCtx.fillStyle = i === 0 ? "#27ae60" : "#2ecc71";
                sCtx.beginPath();
                sCtx.arc(pos.x, pos.y, i === 0 ? 10 : 8, 0, Math.PI*2);
                sCtx.fill();
                sCtx.strokeStyle = "rgba(255,255,255,0.2)";
                sCtx.stroke();
            }
        }

        function gameOverSnake() {
            snakeActive = false;
            document.getElementById("snakeGameOver").style.display = "flex";
        }

        // --- MEYVE OYUNU Sƒ∞STEMƒ∞ ---
        let engine, render, runner, fruitScore = 0, isFruitGameOver = false, canDrop = true, nextFruitIdx = 0;
        const FRUITS = [
            { r: 15, label: 'üçì', score: 2, color: '#ff4d4d' },
            { r: 22, label: 'üçá', score: 4, color: '#a29bfe' },
            { r: 30, label: 'üçä', score: 6, color: '#fdcb6e' },
            { r: 40, label: 'üçé', score: 10, color: '#ff7675' },
            { r: 52, label: 'üçë', score: 15, color: '#fab1a0' },
            { r: 65, label: 'üçâ', score: 25, color: '#2ecc71' }
        ];

        function openFruitGame() {
            document.getElementById("mainMenu").style.display = "none";
            document.getElementById("fruitWrapper").style.display = "block";
            initFruitPhysics();
        }

        function initFruitPhysics() {
            const { Engine, Render, Runner, Bodies, Composite, Events } = Matter;
            const container = document.getElementById('gameCanvas');
            container.innerHTML = ""; fruitScore = 0; isFruitGameOver = false;
            
            engine = Engine.create();
            render = Render.create({
                element: container, engine: engine,
                options: { width: container.clientWidth, height: 480, wireframes: false, background: 'transparent' }
            });

            const ground = Bodies.rectangle(180, 490, 800, 40, { isStatic: true, label: 'wall' });
            const left = Bodies.rectangle(-10, 250, 25, 1000, { isStatic: true, label: 'wall' });
            const right = Bodies.rectangle(370, 250, 25, 1000, { isStatic: true, label: 'wall' });
            Composite.add(engine.world, [ground, left, right]);

            const dropAction = (e) => {
                if(isFruitGameOver || !canDrop) return;
                canDrop = false;
                const rect = container.getBoundingClientRect();
                const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
                const f = FRUITS[nextFruitIdx];
                const fruit = Bodies.circle(x, 30, f.r, { label: f.label, restitution: 0.3, isFirstDrop: true, render: { fillStyle: f.color } });
                Composite.add(engine.world, fruit);
                setTimeout(() => { canDrop = true; nextFruitIdx = Math.floor(Math.random()*3); document.getElementById("nextEmoji").innerText = FRUITS[nextFruitIdx].label; }, 600);
            };

            container.addEventListener('mousedown', dropAction);
            container.addEventListener('touchstart', (e) => { e.preventDefault(); dropAction(e); }, {passive: false});

            Events.on(engine, 'collisionStart', (event) => {
                event.pairs.forEach((pair) => {
                    const { bodyA, bodyB } = pair;
                    if (bodyA.label === bodyB.label && bodyA.label !== 'wall' && !bodyA.isMerging) {
                        const idx = FRUITS.findIndex(f => f.label === bodyA.label);
                        if (idx !== -1 && idx < FRUITS.length - 1) {
                            bodyA.isMerging = true; bodyB.isMerging = true; playPop();
                            const next = FRUITS[idx + 1]; fruitScore += next.score;
                            document.getElementById("scoreVal").innerText = fruitScore;
                            const upgraded = Bodies.circle((bodyA.position.x + bodyB.position.x)/2, (bodyA.position.y + bodyB.position.y)/2, next.r, { label: next.label, render: { fillStyle: next.color } });
                            Composite.remove(engine.world, [bodyA, bodyB]); Composite.add(engine.world, upgraded);
                        }
                    }
                });
            });

            Events.on(engine, 'afterUpdate', () => {
                Composite.allBodies(engine.world).forEach(body => {
                    if (!body.isStatic && body.position.y < 60 && !body.isFirstDrop && body.velocity.y < 0.1) {
                        isFruitGameOver = true; document.getElementById("fruitGameOver").style.display = "flex";
                    }
                    if(body.isFirstDrop && body.position.y > 100) body.isFirstDrop = false;
                });
            });

            Events.on(render, 'afterRender', () => {
                const ctx = render.context;
                Composite.allBodies(engine.world).forEach(body => {
                    if (body.label && body.label !== 'wall') {
                        ctx.font = `${body.circleRadius * 1.3}px Arial`; ctx.textAlign = 'center'; ctx.fillText(body.label, body.position.x, body.position.y + 5);
                    }
                });
            });

            Render.run(render); runner = Runner.create(); Runner.run(runner, engine);
        }
    </script>
</body>
</html>